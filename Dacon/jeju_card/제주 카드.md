# 제주 카드

1. 28일날 4월 데이터를 주고 종료까지 4월 데이터로 리더보드를 계산 종료후 7월 데이터로 lb 측정
2. 코로나에 제일 영향을 받은 월은 3월~4월로 생각된다(확진자가 제일 많이 발생한 달,그이후)
3. 7월은 코로나에 대해 영향을 받지만 그렇게 많이 받지는 않고 대신 수익에 대해 업종별 순위가 달라질거라고 생각이된다.
4. LGB 모델 학습시 matrix 를 커스텀으로 하여 rmsle 함수를 짜서 검증식을 넣어줬는데 점수가 기존보다 조금 올라갔다.
5. 베이스 라인과 EDA 를 통해 featuer eng을 했을때 점수 6점대 이후로 떨어지지 않아서 예측데이터를 만드는 부분을 고쳐보려 생각함
6. trainset 을 submission set 과 데이터 형식을 맞춰서 test 데이터를 submission 의 4~7월 데이터로 적용해 보았고 점수가 5점대 초반으로 떨어짐
7. baseline 코드에 label encoder 가 있는데 label encoder 는 분류모델에서 사용하는걸로 알고 있고 또 label encoder 를 통해 구한 label의 점수가 모델예측에 영향을 줄것으로 보이지만 검색을 했을때 트리모델의 경우 라벨인코딩을 사용해도 무관하다고 한다.
8. 하지만 1개의 피처에 대해서만 테스트를 해보았고 label encoder 를 했을때 보다 점수가 0.1점 향상이 되었다. 이걸로 보았을때 label encoder보다 원핫인코더로 바꿔서 사용하는것이 점수가 오를거 같다. 
9. 아니면 라벨인코더 방향을 유지하고 코로나 발생했을때의 업종별 이용횟수로 많은 이용수 -> 적은 이용수로 라벨을 직접 적어주는것도 성능이 올라갈것 같다.
10. semi supervised 방법이 없을지도 생각해봐야한다. -> CNT, CSTMR_CNT 를 예측한후 예측된 컬럼을 사용하여 AMT 예측 진행
11. 데이터의 특성 파악, 특성을 이용해서 적용했을때 4월데이터 예측에서 rmsle 0.73 으로 높은 성능을 보인다. 하지만 7월 데이터의 특성에 맞게 구하는게 중요할듯

============================================= 07월 31일 종료 

제출 완료
public : 32 등
private : 08월 10일 발표

**후기**
public 리더보드는 최종제출전 평가 데이터를 공개함으로 의미가 없어졌다.
이번 대회는 여러모로 혼돈이 많았고 그러다 보니 돌고돌다가 마지막에 패턴을 찾은것 같다.

대회를 하면서 했던 시도들과 가설들은 위에 넘버링과 같고 마지막 11번 에서 찾은 패턴을 위주로 세운 가설로 최종 제출을 진행했다.

RMSLE 라는 대회 평가식을 기반으로 진행을 하는데 데이터를 보다보면 각 월 별로 업종과 시도의 개수가 다른것을 파악했다.
시도와 업종의 모든 경우의수는 698개이고 각 월마다 610~640 정도로 다른 양상을 보이는것을 확인하였고
이렇게 다른 이유는 소비가 매우 적거나 없는 부분이라고 토론방에 올라와있었다.

그렇기 때문에 1~10까지 했었던 가설들은 698개의 경우의 수를 사용하여 예측을 했기때문에
실제 0이 들어갈 값에 예측값이 들어가면서 점수가 좋지 못했던것이였다.

그래서 나는 202007의 시도와 업종의 경우의 수를 예측하는것으로 방향을 잡았다.
먼저 202007의 개수를 예측해야 됬는데.
가장 최근데이터인 202004, 202003 과 201904,201903 이 두개로 전년과 많이 다른가를 확인하였다
201904,201903 (633,630)  202004,202003(610,610) 로 각 데이터의 갯수는 다음과 같고 중복값을 확인했을때 (607,608) 로 대부분이 전년도에서 중복되는것으로 확인하였다.
또 20개정도 빠진것들이 무엇인지를 확인했을때 (내항 여객기, 면세점, 택시, 호텔 등 약 12개의 대면업종) 들로 있었고 이부분들은 코로나로 인해 큰 타격을 입는것으로 따로 covid 피처를 만들어 최종 예측에 사용하였다.

633,610 두개를 보고 07월의 데이터를 확인하였고 638개라는 갯수를 확인하였다. 하지만 코로나로 인해서 202007도 갯수가 많이 줄었을것이라고 생각하여
전년과 이번년의 감가율 + 전년04에서 07월의 증가율 을 계산하여 202007의 행 갯수를 예측하였다.

계산식을 적용하였을때 628로 나왔고 뉴스와 소비자현황등을 보았을때 많이 회복되었다는것으로 보아 충분히 가능하다고 생각하였다.

이후는 뭐 628개로 예측 및 제출을 하였다. 마지막에 시간이 부족해서 코드적으로 실수한 부분이 많아 결과가 잘 나올지는 잘 모르겠다.

하지만 0.73을 받았을때의 가설과 동일하게 적용된다면 충분히 상위권에 올라갈수 있을거라고 생각된다.


 



